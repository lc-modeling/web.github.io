<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Meta Tags -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
  <!-- Primary Meta Tags -->
  <title>L&C Models Management Kenya | Join 5000+ Aspiring Models</title>
  <meta name="description" content="Join L&C Models Management Kenya and be part of 5000+ aspiring models. Enjoy professional branding, global exposure, and a non-exclusive contract. Apply now!">
  <meta name="keywords" content="L&C Models, Models Management Kenya, Modeling Agency, Fashion Models, Commercial Models, Runway, Plus-size, Talent Management, Global Exposure">
  <meta name="robots" content="index, follow" />

  <!-- Open Graph (OG) for Social Media -->
  <meta property="og:title" content="L&C Models Management Kenya | Join 5000+ Aspiring Models" />
  <meta property="og:description" content="Join L&C Models Management Kenya and be part of 5000+ aspiring models. Enjoy professional branding, global exposure, and a non-exclusive contract. Apply now!"/>
  <meta property="og:image" content="modelsh.jpg" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://your-domain.com" />

  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="L&C Models Management Kenya | Join 5000+ Aspiring Models">
  <meta name="twitter:description" content="Join L&C Models Management Kenya and be part of 5000+ aspiring models. Enjoy professional branding, global exposure, and a non-exclusive contract."/>
  <meta name="twitter:image" content="modelsh.jpg">

  <!-- JSON-LD Structured Data (Organization) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "L&C Models Management Kenya",
    "url": "https://your-domain.com",
    "logo": "https://your-domain.com/logo.png",
    "description": "Join L&C Models Management Kenya and be part of 5000+ aspiring models. Enjoy professional branding, global exposure, and a non-exclusive contract.",
    "contactPoint": [{
      "@type": "ContactPoint",
      "telephone": "+254-XXX-XXX-XXX",
      "contactType": "Customer Support"
    }]
  }
  </script>

  <!-- Google Font (Poppins) and Font Awesome -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* Global Font Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    body {
      background-color: #f6f6f6;
      color: #333;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    /* L&C Container */
    .lc-container {
      background-color: black;
      color: white;
      padding: 20px;
      margin-bottom: 20px;
    }
    .lc-image-wrapper {
      position: relative;
      width: 100%;
      max-width: 750px;
      margin: 0 auto 20px;
      overflow: hidden;
    }
    .lc-image-wrapper img {
      width: 100%;
      height: auto;
      display: block;
      transition: transform 0.3s ease-in-out;
    }
    .lc-image-wrapper:hover img {
      transform: scale(1.05);
    }
    .lc-title {
      font-size: 2rem;
      margin-bottom: 10px;
      font-weight: 600;
    }
    .lc-text {
      font-size: 1.1rem;
      line-height: 1.6;
      text-align: left;
      margin-bottom: 10px;
    }
    .lc-section {
      margin-bottom: 20px;
    }
    .lc-section h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      font-weight: 600;
    }
    .lc-section h4 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      font-weight: 600;
    }
    .lc-section ul {
      list-style-type: disc;
      padding-left: 20px;
      text-align: left;
    }
    .lc-section li {
      font-size: 1rem;
      margin-bottom: 10px;
    }
    .lc-benefits h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
    }
    .lc-benefits ul {
      list-style-type: disc;
      padding-left: 20px;
      text-align: left;
    }
    .lc-benefits li {
      font-size: 1rem;
      margin-bottom: 10px;
    }
    .lc-apply-btn {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 20px;
      background-color: white;
      color: black;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s ease-in-out;
    }
    .lc-apply-btn:hover {
      background-color: gray;
    }
    @media (max-width: 600px) {
      .lc-title { font-size: 1.8rem; }
      .lc-text { font-size: 1rem; }
      .lc-benefits h3 { font-size: 1.3rem; }
    }
    /* Model Container & Slider Styles */
    .model-container {
      background-color: #fff;
      margin-bottom: 30px;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: relative;
    }
    .model-name {
      font-size: 1.5rem;
      margin-bottom: 15px;
      font-weight: 600;
    }
    .slider-container {
      position: relative;
      overflow: hidden;
      border-radius: 8px;
      background-color: #fff;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 10px;
    }
    .slider-track {
      display: flex;
      transition: transform 0.5s ease;
      will-change: transform;
    }
    .slide {
      flex: 0 0 auto;
      text-align: center;
      padding: 10px;
    }
    .slide img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      object-fit: cover;
    }
    @media (min-width: 992px) { .slide { width: calc(100% / 3); } }
    @media (max-width: 991px) { .slide { width: 100%; } }
    .slider-arrows {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      margin: 10px 0;
      user-select: none;
    }
    .slider-arrow {
      font-size: 1.8rem;
      cursor: pointer;
      color: #333;
      transition: color 0.3s;
    }
    .slider-arrow:hover { color: #007BFF; }
    .dots-container {
      text-align: center;
      margin-bottom: 15px;
    }
    .dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #ccc;
      margin: 0 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .dot.active { background-color: #000; }
    .text-description { font-size: 1rem; color: #444; margin-bottom: 10px; }
    .full-description { font-size: 0.95rem; color: #666; margin-bottom: 10px; }
    .publish-date { font-size: 0.85rem; color: #888; margin-bottom: 15px; }
    .actions {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    .share-button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background-color 0.3s;
      background-color: #17a2b8;
      color: #fff;
      font-weight: 600;
    }
    .share-button:hover { background-color: #138496; }
    .enquire-button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background-color 0.3s;
      background-color: #28a745;
      color: #fff;
      font-weight: 600;
    }
    .enquire-button:hover { background-color: #1e7e34; }
    /* Modal Overlay & Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.4);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      padding: 10px;
    }
    .modal-overlay.active { display: flex; }
    .modal {
      background-color: #fff;
      width: 90%;
      max-width: 500px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      position: relative;
      padding: 20px;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .modal-header h2 { font-size: 1.2rem; font-weight: 600; }
    .modal-minimize {
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.3s;
      user-select: none;
      color: #dc3545;
    }
    .modal-minimize:hover { color: #a71d2a; }
    .modal-body { text-align: left; }
    .modal-body label {
      display: block;
      margin-bottom: 5px;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .modal-body input[type="text"],
    .modal-body input[type="email"],
    .modal-body input[type="tel"],
    .modal-body select,
    .modal-body textarea {
      width: 100%;
      margin-bottom: 15px;
      padding: 10px;
      font-size: 0.9rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: 'Poppins', sans-serif;
    }
    .modal-body textarea { height: 80px; resize: vertical; }
    .modal-footer { text-align: right; }
    .submit-button {
      background-color: #007BFF;
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    .submit-button:hover { background-color: #0056b3; }
    /* Share Modal Options */
    .share-options {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
    }
    .share-option {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      color: #007BFF;
      transition: color 0.3s;
    }
    .share-option:hover { color: #0056b3; }
    /* Navbar Styling */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 50px;
      background-color: #1c1c1c;
      color: #fff;
      position: fixed;
      width: 100%;
      top: 0;
      left: 0;
      z-index: 1000;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    }
    .brand-title { font-size: 1.5rem; font-weight: 600; }
    .navbar-links ul { list-style: none; display: flex; gap: 25px; }
    .navbar-links ul li { display: inline; }
    .navbar-links ul li a {
      text-decoration: none;
      color: #fff;
      font-size: 1rem;
      font-weight: 400;
      transition: 0.3s ease-in-out;
      padding: 8px 12px;
      border-radius: 5px;
    }
    .navbar-links ul li a:hover {
      background-color: #ff6b6b;
      color: #fff;
    }
    .toggle-button {
      display: none;
      flex-direction: column;
      cursor: pointer;
    }
    .bar {
      background-color: #fff;
      height: 3px;
      width: 25px;
      margin: 4px 0;
      transition: 0.3s ease-in-out;
    }
    @media (max-width: 768px) {
      .toggle-button { display: flex; }
      .navbar-links {
        display: none;
        flex-direction: column;
        width: 100%;
        background-color: #222020;
        position: absolute;
        top: 60px;
        left: 0;
        text-align: center;
        padding: 20px 0;
      }
      .navbar-links ul { flex-direction: column; width: 100%; }
      .navbar-links ul li { padding: 15px 0; }
      .navbar-links.active { display: flex; }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <header>
    <nav class="navbar">
      <div class="brand-title">L&C MODELS MANAGEMENT</div>
      <a href="javascript:void(0);" class="toggle-button" id="toggle-button">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </a>
      <div class="navbar-links" id="navbar-links">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="blog.html">Blog</a></li>
        </ul>
      </div>
    </nav>
  </header>
  <br>
  <script>
    // Toggle menu functionality
    document.getElementById("toggle-button").addEventListener("click", function () {
      document.getElementById("navbar-links").classList.toggle("active");
    });
  </script>
  
  <!-- L&C Container -->
  <div class="lc-container">
    <div class="lc-image-wrapper">
      <img src="modelsh.png" alt="L&C Models">
    </div>
    <h2 class="lc-title">L&C Models Management Kenya</h2>
    <div class="lc-text lc-section">
      <p>
        L&C Models Management is looking for new faces every day! With unlimited spots available, we aim to feature over 5000+ models.
        To apply, models are required to submit professional photos along with their details, including full name, date of birth, nationality, and occupation.
      </p>
    </div>
    <div class="lc-text lc-section">
      <h3>Our Innovative Online Platform</h3>
      <p>
        We have launched an advanced online platform catering to all types of models, including fashion, commercial, fitness, plus-size, and runway. 
        This allows for a more inclusive approach, breaking traditional modeling stereotypes and opening opportunities for diverse talents.
      </p>
      <h4>Key Features:</h4>
      <ul>
        <li><strong>Personalized Model Portals:</strong> Each model has a dedicated profile to showcase their portfolio, including photos, videos, measurements, and unique talents.</li>
        <li><strong>Talent Showcasing:</strong> Models can highlight their skills through runway clips, behind-the-scenes content, and creative videos.</li>
        <li><strong>Global Client Connections:</strong> L&C connects models with top fashion brands, photographers, advertisers, and film producers worldwide.</li>
      </ul>
    </div>
    <div class="lc-benefits lc-section">
      <h3>Benefits of Joining L&C Models Management</h3>
      <ul>
        <li><strong>Enhanced Portfolio Development:</strong> Models receive professional branding through high-quality photoshoots every two weeks.</li>
        <li><strong>Global Marketing Exposure:</strong> Get promoted on an international scale for better visibility.</li>
        <li><strong>Increased Industry Awareness:</strong> Stand out in the competitive modeling industry.</li>
        <li><strong>Networking Opportunities:</strong> Connect with major brands and industry professionals for career growth.</li>
      </ul>
    </div>
    <p><strong>Most importantly, our contract is non-exclusive, meaning models are free to work with other agencies as well.</strong></p>
    <!-- Apply Now button triggers the Apply modal -->
    <button class="lc-apply-btn" onclick="toggleApplyModal()">Apply Now</button>
  </div>

  <script>
    // Placeholder function if needed
    function applyNow() {
      alert("Redirecting to the application form...");
      // window.location.href = "https://your-application-link.com";
    }
  </script>

  <h1>Models Collection</h1>
  <div id="all-models"></div>

  <!-- Enquire / Book Model Modal -->
  <div class="modal-overlay" id="enquireModal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modal-title">Enquire / Book Model</h2>
        <span class="modal-minimize" onclick="toggleModal()">
          <i class="fas fa-times"></i>
        </span>
      </div>
      <div class="modal-body">
        <label for="modelName">Model Name</label>
        <input type="text" id="modelName" readonly />
        <label for="modelUrl">Profile URL</label>
        <input type="text" id="modelUrl" readonly />
        <label for="userName">Your Name</label>
        <input type="text" id="userName" placeholder="Enter your name..." />
        <label for="userEmail">Your Email</label>
        <input type="email" id="userEmail" placeholder="Enter your email..." />
        <label for="userTelephone">Your Telephone</label>
        <input type="tel" id="userTelephone" placeholder="Enter your telephone..." />
        <label for="enquireType">Enquiry Type</label>
        <select id="enquireType">
          <option value="Enquire about model">Enquire about model</option>
          <option value="Book model">Book model</option>
        </select>
        <label for="userMessage">Message</label>
        <textarea id="userMessage" placeholder="Write your message..."></textarea>
      </div>
      <div class="modal-footer">
        <button class="submit-button" onclick="submitEnquiry()">Submit</button>
      </div>
    </div>
  </div>

  <!-- Apply Now Modal -->
  <div class="modal-overlay" id="applyModal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="applyModalTitle">Apply / Enquire / Hire Models</h2>
        <span class="modal-minimize" onclick="toggleApplyModal()">
          <i class="fas fa-times"></i>
        </span>
      </div>
      <div class="modal-body">
        <label for="applyName">Your Name</label>
        <input type="text" id="applyName" placeholder="Enter your name..." />
        <label for="applyEmail">Your Email</label>
        <input type="email" id="applyEmail" placeholder="Enter your email..." />
        <label for="applyTelephone">Your Telephone</label>
        <input type="tel" id="applyTelephone" placeholder="Enter your telephone..." />
        <label for="applyMessage">Message</label>
        <textarea id="applyMessage" placeholder="Write your message..."></textarea>
        <label for="applyOption">I want to:</label>
        <select id="applyOption">
          <option value="Apply">Apply</option>
          <option value="Enquire">Enquire</option>
          <option value="Hire Models">Hire Models</option>
        </select>
      </div>
      <div class="modal-footer">
        <button class="submit-button" onclick="submitApplyForm()">Submit</button>
      </div>
    </div>
  </div>

  <!-- Share Modal -->
  <div class="modal-overlay" id="shareModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Share</h2>
        <span class="modal-minimize" onclick="toggleShareModal()">
          <i class="fas fa-times"></i>
        </span>
      </div>
      <div class="modal-body" style="text-align: center;">
        <div class="share-options">
          <button class="share-option" id="shareFacebook" title="Share on Facebook">
            <i class="fab fa-facebook"></i>
          </button>
          <button class="share-option" id="shareInstagram" title="Share on Instagram">
            <i class="fab fa-instagram"></i>
          </button>
          <button class="share-option" id="shareTwitter" title="Share on Twitter">
            <i class="fab fa-twitter"></i>
          </button>
          <button class="share-option" id="shareWhatsApp" title="Share on WhatsApp">
            <i class="fab fa-whatsapp"></i>
          </button>
          <button class="share-option" id="copyLink" title="Copy Link">
            <i class="fas fa-copy"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- EmailJS Script and Initialization -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    // Initialize EmailJS with your new Public Key
    document.addEventListener("DOMContentLoaded", function() {
      emailjs.init("dsXzYWYxtQEg1cUPx");
    });

    // Enquire/Book Modal submission
    function submitEnquiry() {
      const fromName = document.getElementById('userName').value.trim();
      const email = document.getElementById('userEmail').value.trim();
      const telephone = document.getElementById('userTelephone').value.trim();
      const modelName = document.getElementById('modelName').value;
      const modelUrl = document.getElementById('modelUrl').value;
      const enquiryType = document.getElementById('enquireType').value;
      const userMessage = document.getElementById('userMessage').value.trim();

      if (!fromName || !email) {
        alert("Please enter your name and email.");
        return;
      }

      // Compile extra details into the message body
      let messageBody = "";
      messageBody += "Model Name: " + modelName + "\n";
      messageBody += "Profile URL: " + modelUrl + "\n";
      messageBody += "Enquiry Type: " + enquiryType + "\n";
      messageBody += "User Message: " + userMessage + "\n";

      const templateParams = {
        to_name: "Lc modeling website",
        from_name: fromName,
        email: email,
        telephone: telephone,
        message: messageBody
      };

      emailjs.send("service_hw70pzw", "template_rqn75wb", templateParams)
        .then(response => {
          alert("Your enquiry has been submitted successfully!");
          toggleModal(); // Close the Enquire modal
        })
        .catch(error => {
          console.error("FAILED...", error);
          alert("There was an error submitting your enquiry. Please try again later.");
        });
    }

    // Apply Now Modal submission
    function submitApplyForm() {
      const fromName = document.getElementById('applyName').value.trim();
      const email = document.getElementById('applyEmail').value.trim();
      const telephone = document.getElementById('applyTelephone').value.trim();
      const userMessage = document.getElementById('applyMessage').value.trim();
      const option = document.getElementById('applyOption').value;

      if (!fromName || !email) {
        alert("Please enter your name and email.");
        return;
      }

      let messageBody = "";
      messageBody += "Option: " + option + "\n";
      messageBody += "User Message: " + userMessage + "\n";

      const templateParams = {
        to_name: "Lc modeling website",
        from_name: fromName,
        email: email,
        telephone: telephone,
        message: messageBody
      };

      emailjs.send("service_hw70pzw", "template_rqn75wb", templateParams)
        .then(response => {
          alert("Your submission has been sent successfully!");
          toggleApplyModal(); // Close the Apply modal
        })
        .catch(error => {
          console.error("FAILED...", error);
          alert("There was an error submitting your form. Please try again later.");
        });
    }

    // Modal Toggle Functions
    function toggleModal() {
      document.getElementById('enquireModal').classList.toggle('active');
    }
    function toggleApplyModal() {
      document.getElementById('applyModal').classList.toggle('active');
    }
    function toggleShareModal() {
      document.getElementById('shareModal').classList.toggle('active');
    }
    window.toggleModal = toggleModal;
    window.toggleApplyModal = toggleApplyModal;
    window.toggleShareModal = toggleShareModal;

    // Functions to open modals with preset data
    function openEnquireForm(modelName, shareUrl) {
      document.getElementById('modelName').value = modelName;
      document.getElementById('modelUrl').value = shareUrl;
      toggleModal();
    }
    let currentShareUrl = "";
    function openShareModal(modelName, shareUrl) {
      currentShareUrl = shareUrl;
      toggleShareModal();
    }

    // Share Modal Event Listeners
    document.getElementById('shareFacebook').addEventListener('click', () => {
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentShareUrl)}`, '_blank');
    });
    document.getElementById('shareInstagram').addEventListener('click', () => {
      window.open('https://www.instagram.com', '_blank');
    });
    document.getElementById('shareTwitter').addEventListener('click', () => {
      window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(currentShareUrl)}`, '_blank');
    });
    document.getElementById('shareWhatsApp').addEventListener('click', () => {
      window.open(`https://wa.me/?text=${encodeURIComponent(currentShareUrl)}`, '_blank');
    });
    document.getElementById('copyLink').addEventListener('click', () => {
      const tempInput = document.createElement('input');
      tempInput.value = currentShareUrl;
      document.body.appendChild(tempInput);
      tempInput.select();
      document.execCommand('copy');
      document.body.removeChild(tempInput);
      alert('Copied');
    });
  </script>

  <!-- Firebase and Firestore Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAxauEEtqkuJOWA9HRe1jpT_wCXH62nksM",
      authDomain: "schoolcms-77713.firebaseapp.com",
      projectId: "schoolcms-77713",
      storageBucket: "schoolcms-77713.appspot.com",
      messagingSenderId: "757700374571",
      appId: "1:757700374571:web:a86b334d619cf160fa7a6e"
    };
    const app = initializeApp(firebaseConfig);
    const firestore = getFirestore(app);

    function debounce(func, delay) {
      let timeout;
      return function(...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), delay);
      };
    }

    function sanitizeHTML(str) {
      const temp = document.createElement('div');
      temp.textContent = str;
      return temp.innerHTML;
    }

    async function displayModels() {
      const allModels = document.getElementById('all-models');
      allModels.innerHTML = '<p>Loading models...</p>';
      try {
        const modelsRef = collection(firestore, "lc_models_management");
        const modelsQuery = query(modelsRef, orderBy("publish_date", "desc"));
        const snapshot = await getDocs(modelsQuery);
        allModels.innerHTML = '';
        snapshot.forEach(doc => {
          const data = doc.data();
          const modelDiv = document.createElement('div');
          modelDiv.className = 'model-container';
          modelDiv.id = encodeURIComponent(data.header_image);
          let formattedDate = '';
          if (data.publish_date) {
            let dateObj;
            if (data.publish_date.toDate) {
              dateObj = data.publish_date.toDate();
            } else {
              dateObj = new Date(data.publish_date);
            }
            formattedDate = dateObj.toLocaleDateString(undefined, {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            });
          }
          const allImages = [];
          if (data.header_image) allImages.push(data.header_image);
          if (data.images && Array.isArray(data.images)) {
            allImages.push(...data.images);
          }
          modelDiv.innerHTML = `
            <h2 class="model-name">${sanitizeHTML(data.name)}</h2>
            <div class="slider-container"></div>
            <p class="text-description">
              ${sanitizeHTML(data.text_description || '')}
            </p>
            <p class="full-description">
              ${sanitizeHTML(data.full_description || '')}
            </p>
            <p class="publish-date">
              <strong>Published on:</strong> ${formattedDate}
            </p>
          `;
          const sliderContainer = modelDiv.querySelector('.slider-container');
          if (allImages.length > 0) {
            initSlider(sliderContainer, allImages);
          }
          const actionsDiv = document.createElement('div');
          actionsDiv.className = 'actions';
          const shareBtn = document.createElement('button');
          shareBtn.className = 'share-button';
          shareBtn.innerHTML = '<i class="fas fa-share-alt"></i> Share';
          shareBtn.addEventListener('click', () => {
            const shareUrl = `${window.location.origin}${window.location.pathname}?header_image=${encodeURIComponent(data.header_image)}`;
            openShareModal(data.name, shareUrl);
          });
          const enquireBtn = document.createElement('button');
          enquireBtn.className = 'enquire-button';
          enquireBtn.textContent = 'Enquire';
          enquireBtn.addEventListener('click', () => {
            const shareUrl = `${window.location.origin}${window.location.pathname}?header_image=${encodeURIComponent(data.header_image)}`;
            openEnquireForm(data.name, shareUrl);
          });
          actionsDiv.appendChild(shareBtn);
          actionsDiv.appendChild(enquireBtn);
          modelDiv.appendChild(actionsDiv);
          allModels.appendChild(modelDiv);
        });
        const urlParams = new URLSearchParams(window.location.search);
        const headerImage = urlParams.get('header_image');
        if (headerImage) {
          const target = document.getElementById(encodeURIComponent(headerImage));
          if (target) {
            debounce(() => {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 200)();
          }
        }
      } catch (error) {
        console.error("Error fetching models:", error);
        allModels.innerHTML = '<p>Error loading models. Please try again later.</p>';
      }
    }

    function initSlider(sliderContainer, slidesData) {
      const sliderTrack = document.createElement('div');
      sliderTrack.className = 'slider-track';
      sliderContainer.appendChild(sliderTrack);
      slidesData.forEach(imgSrc => {
        const slide = document.createElement('div');
        slide.className = 'slide';
        slide.innerHTML = `<img src="${sanitizeHTML(imgSrc)}" alt="Model Image">`;
        sliderTrack.appendChild(slide);
      });
      const sliderArrows = document.createElement('div');
      sliderArrows.className = 'slider-arrows';
      sliderArrows.innerHTML = `
        <span class="slider-arrow slider-arrow-left">&#10094;</span>
        <span class="slider-arrow slider-arrow-right">&#10095;</span>
      `;
      sliderContainer.parentNode.insertBefore(sliderArrows, sliderContainer.nextSibling);
      const dotsContainer = document.createElement('div');
      dotsContainer.className = 'dots-container';
      sliderContainer.parentNode.insertBefore(dotsContainer, sliderArrows.nextSibling);
      const slides = sliderTrack.querySelectorAll('.slide');
      const arrowLeft = sliderArrows.querySelector('.slider-arrow-left');
      const arrowRight = sliderArrows.querySelector('.slider-arrow-right');
      const totalSlides = slides.length;
      let currentIndex = 0;
      function itemsToShow() { return window.innerWidth >= 992 ? 3 : 1; }
      function createDots() {
        dotsContainer.innerHTML = '';
        for (let i = 0; i < totalSlides; i++) {
          const dot = document.createElement('span');
          dot.classList.add('dot');
          dot.addEventListener('click', () => { currentIndex = i; updateSlider(); });
          dotsContainer.appendChild(dot);
        }
      }
      function updateDots() {
        const dots = dotsContainer.querySelectorAll('.dot');
        dots.forEach((dot, idx) => { dot.classList.toggle('active', idx === currentIndex); });
      }
      function updateSlider() {
        const visibleCount = itemsToShow();
        const slideWidth = 100 / visibleCount;
        if (currentIndex >= totalSlides) currentIndex = 0;
        if (currentIndex < 0) currentIndex = totalSlides - 1;
        sliderTrack.style.transform = `translateX(-${currentIndex * slideWidth}%)`;
        updateDots();
      }
      function nextSlide() { currentIndex++; updateSlider(); }
      function prevSlide() { currentIndex--; updateSlider(); }
      arrowLeft.addEventListener('click', prevSlide);
      arrowRight.addEventListener('click', nextSlide);
      window.addEventListener('resize', updateSlider);
      setInterval(nextSlide, 7000);
      createDots();
      updateSlider();
    }

    displayModels();
  </script>
  <script>
    async function shortenAndCopy() {
      // Make sure we actually have a ?header_image URL to shorten
      if (!currentShareUrl) {
        return alert("Please click Share on a model first!");
      }
  
      const fullUrl = currentShareUrl;
      try {
        // ask TinyURL to shorten that full model URL
        const resp = await fetch(
          "https://tinyurl.com/api-create.php?url=" +
            encodeURIComponent(fullUrl)
        );
        if (!resp.ok) throw new Error("Network response was not OK");
  
        const shortUrl = await resp.text(); // e.g. "http://tinyurl.com/abc123"
        await navigator.clipboard.writeText(shortUrl);
        alert("Copied short link:\n" + shortUrl);
      } catch (e) {
        console.error("Shorten/copy failed:", e);
        alert("Could not generate short link. Try again later.");
      }
    }
  
    // bind it (no need to cloneNode now)
    document
      .getElementById("copyLink")
      .addEventListener("click", shortenAndCopy);
  </script>
  
</body>
</html>
